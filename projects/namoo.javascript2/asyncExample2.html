<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>

        //웹서버 로그인 비동기 통신
        function loginUser(id, passwd, onSuccess, onError) {
            setTimeout(() => {
                if(id==='bangry' && passwd==='1111'){
                    onSuccess(id);
                }else{
                    onError(new Error("회원 정보를 다시 확인하세요."));
                }
            },2000);
        };
        // 사용자 업무내용 수신
        function getRole(id, onSuccess, onError){
            setTimeout(() => {
                if(id==='bangry'){
                    onSuccess({id:id, role:"Teacher"}); 
                }else{
                    onError(new Error("회원 정보를 접근할 수 없습니다."));
                }
            },2000);
        };

        //함수 사용
        let id = prompt("아이디를 입력하세요");
        let passwd = prompt("비밀번호를 입력하세요");

        //로그인
        loginUser(id,
         passwd, 
         function(loginId){
            // alert(`${loginId}님 로그인 성공`)
            getRole(loginId,
            function(user){
                alert(`사용자 아이디 : ${user.id} 업무 : ${user.role}`);
            },
            function(error){
                alert(error);
            });
        },
        function(error){
            alert(error);
        });
    </script>
</body>
</html>